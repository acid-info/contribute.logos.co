"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{497:(e,r,t)=>{t.d(r,{Z:()=>i,cn:()=>o,q:()=>n});var a=t(8136),s=t(1064),l=t(5778);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.A)(r))}function n(){return"development"===l.env.NEXT_PUBLIC_API_MODE?"http://localhost:3000/api":"staging"===l.env.NEXT_PUBLIC_API_MODE?"https://dev-admin-acid.logos.co/api":"https://admin-acid.logos.co/api"}function i(e){return null==e?"0":e.toLocaleString()}},563:(e,r,t)=>{t.d(r,{N_:()=>l,a8:()=>n,rd:()=>i});var a=t(2702),s=t(9193);let{Link:l,redirect:o,usePathname:n,useRouter:i,getPathname:d}=(0,a.A)(s.D)},1160:(e,r,t)=>{t.d(r,{b:()=>a});let a={home:"/",contributors:"/contributors",resources:"/resources",form:"/form",proposals:"/proposals",issues:"/issues",leaderboard:"/leaderboard"}},5153:(e,r,t)=>{t.d(r,{default:()=>f});var a=t(9280),s=t(8877),l=t(563),o=t(5916),n=t(9983),i=t(6941),d=t(497);let c=async()=>{let e=(0,d.q)(),r=await fetch("".concat(e,"/contribute/categories"));if(!r.ok)throw Error("Failed to fetch categories: ".concat(r.status));let t=await r.json();if(!t.success||!t.data)throw Error("Invalid categories response");return t.data},m=()=>(0,i.I)({queryKey:["categories"],queryFn:c,staleTime:6e5,gcTime:18e5,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)});var u=t(9611);let p=async e=>{let r=(0,d.q)(),t=await fetch("".concat(r,"/contribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to submit: ".concat(t.status));return a},x=()=>(0,u.n)({mutationFn:p,retry:2,retryDelay:e=>Math.min(1e3*2**e,5e3)});var b=t(8362),h=t(1160);let g=(0,n.default)(()=>Promise.all([t.e(481),t.e(395),t.e(546),t.e(786)]).then(t.bind(t,4786)),{loadableGenerated:{webpack:()=>[4786]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"rich-text-editor w-full",children:[(0,a.jsxs)("div",{className:"border-primary flex flex-wrap items-center gap-1 divide-x border border-b-0 bg-transparent p-1 text-sm text-black dark:bg-transparent dark:text-white",children:[(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H1",children:"H1"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H2",children:"H2"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Bold",children:"B"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Italic",children:"I"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Underline",children:"U"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pl-3 text-black opacity-50 dark:text-white","aria-label":"Set link",children:"\uD83D\uDD17"})]}),(0,a.jsx)("div",{className:"border-primary rounded-none border bg-transparent px-3 py-2 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert flex min-h-[9rem] items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading editor..."]})})})]})});function y(){var e,r;let[t,l]=(0,o.useState)(""),[n,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[u,p]=(0,o.useState)(""),[y,f]=(0,o.useState)(0),[v,k]=(0,o.useState)(null),[w,j]=(0,o.useState)(!1),[N,E]=(0,o.useState)({name:!1,email:!1,message:!1}),D=(0,o.useRef)(null),S=(0,b.Ym)(),C=(0,s.c3)("form"),{data:_=[],isLoading:P,error:L}=m(),B=x();function I(e){return/\S+@\S+\.\S+/.test(e)||49===e.length&&e.startsWith("zQ3sh")&&/^[a-zA-Z0-9]+$/.test(e)}(0,o.useEffect)(()=>{_.length>0&&null===v&&k(_[0].id)},[_,v]),(0,o.useEffect)(()=>{function e(e){D.current&&!D.current.contains(e.target)&&j(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let A=N.name&&t.trim().length<2?C("nameError"):"",T=N.email&&!I(n)?C("emailError"):"",F=N.message&&u.trim().length<5?C("messageError"):"";async function q(e){e.preventDefault(),window.umami.track("Proposals - Logos Contribute",{source:"".concat(S).concat(h.b.proposals,"/")}),E({name:!0,email:!0,message:!0}),!(t.trim().length<2)&&I(n)&&!(u.trim().length<5)&&v&&B.mutate({name:t,email:n,message:d,category:v},{onSuccess:()=>{l(""),i(""),c(""),p(""),f(e=>e+1),k(_.length>0?_[0].id:null),E({name:!1,email:!1,message:!1})}})}let M=B.isPending,H=B.isSuccess?"success":B.isError?"error":"idle",z=(null==(e=B.error)?void 0:e.message)||null;return L?(0,a.jsx)("div",{className:"border-primary mx-auto w-full border p-6",children:(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:C("categoriesError")})}):(0,a.jsxs)("div",{className:"border-primary mx-auto w-full border p-6",children:["success"===H&&(0,a.jsx)("div",{role:"status","aria-live":"polite",className:"mb-4 rounded-md bg-green-50 p-3 text-sm text-green-700 dark:bg-green-950/30 dark:text-green-300",children:C("success")}),"error"===H&&(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:z||C("error")}),(0,a.jsxs)("form",{onSubmit:q,noValidate:!0,className:"form grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"name",className:"mb-1 block text-sm font-medium",children:C("name")}),(0,a.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:t,onChange:e=>l(e.target.value),onBlur:()=>E(e=>({...e,name:!0})),"aria-invalid":!!A,"aria-describedby":A?"name-error":void 0,className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(A?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:C("namePlaceholder")}),A&&(0,a.jsx)("p",{id:"name-error",className:"mt-1 text-xs text-red-600",children:A})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium",children:C("email")}),(0,a.jsx)("input",{id:"email",name:"email",type:"text",required:!0,value:n,onChange:e=>i(e.target.value),onBlur:()=>E(e=>({...e,email:!0})),"aria-invalid":!!T,"aria-describedby":T?"email-error":"email-help",className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(T?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:C("emailPlaceholder")}),T&&(0,a.jsx)("p",{id:"email-error",className:"mt-1 text-xs text-red-600",children:T})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"category",className:"mb-1 block text-sm font-medium",children:C("category")}),(0,a.jsxs)("div",{className:"relative",ref:D,children:[(0,a.jsx)("div",{id:"category",role:"combobox","aria-expanded":w,"aria-haspopup":"listbox",tabIndex:0,onClick:()=>!P&&j(!w),onKeyDown:function(e){"Enter"===e.key||" "===e.key?(e.preventDefault(),j(!w)):"Escape"===e.key?j(!1):("ArrowDown"===e.key||"ArrowUp"===e.key)&&(e.preventDefault(),w||j(!0))},className:"border-primary focus:border-primary w-full rounded-none border bg-transparent px-3 py-2 pr-10 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white ".concat(P?"cursor-not-allowed opacity-50":"cursor-pointer"),children:P?C("categoryLoading"):(null==(r=_.find(e=>e.id===v))?void 0:r.display_name)||C("categorySelect")}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center",children:(0,a.jsx)("svg",{className:"h-4 w-4 text-black transition-transform dark:text-white ".concat(w?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M6 9l6 6 6-6"})})}),w&&!P&&(0,a.jsx)("div",{role:"listbox",className:"dropdown-menu absolute top-full right-0 left-0 z-10 mt-1 border border-black bg-white shadow-lg dark:border-white dark:bg-black",style:{backgroundColor:"var(--dropdown-bg, white)",color:"var(--dropdown-text, black)"},children:_.map(e=>(0,a.jsx)("div",{role:"option","aria-selected":v===e.id,tabIndex:0,onClick:()=>{k(e.id),j(!1)},onKeyDown:r=>{var t,a;return t=r,a=e.id,void(("Enter"===t.key||" "===t.key)&&(t.preventDefault(),k(a),j(!1)))},className:"dropdown-option cursor-pointer px-3 py-2 text-sm transition-colors",style:{color:"inherit"},children:e.display_name},e.id))})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"message",className:"mb-1 block text-sm font-medium",children:C("message")}),(0,a.jsx)("div",{id:"message",className:"sr-only","aria-hidden":"true",children:C("editor")}),(0,a.jsx)(g,{initialValue:d,resetKey:y,onChange:(e,r)=>{c(e),p(r)},onBlur:()=>E(e=>({...e,message:!0})),invalid:!!F,ariaDescribedBy:F?"message-error":void 0,placeholder:C("messagePlaceholder")}),F&&(0,a.jsx)("p",{id:"message-error",className:"mt-1 text-xs text-red-600",children:F})]}),(0,a.jsx)("div",{className:"pt-2 md:col-span-2",children:(0,a.jsxs)("button",{type:"submit",disabled:M,className:"border-primary inline-flex cursor-pointer items-center justify-center gap-2 rounded-none border px-4 py-2 text-sm font-medium disabled:cursor-not-allowed disabled:opacity-70",children:[M&&(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),C(M?"sending":"send")]})})]})]})}function f(e){let{description:r,showHowToContributeLink:t=!0}=e,o=(0,s.c3)("proposals");return(0,a.jsxs)("div",{className:"mx-auto flex w-full max-w-2xl flex-col items-center",children:[r&&(0,a.jsx)("div",{className:"mb-8 flex flex-col items-center gap-2",children:r&&(0,a.jsx)("p",{className:"mb-8 text-base",children:r})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(y,{}),t&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(l.N_,{href:"/resources/how-to-contribute",className:"underline",children:o("howToContribute")})})]})]})}},9193:(e,r,t)=>{t.d(r,{D:()=>a});let a=(0,t(3987).A)({locales:["en","fr","ko"],defaultLocale:"en",localePrefix:"always",localeDetection:!1})}}]);