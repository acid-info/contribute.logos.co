(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{2001:(e,r,t)=>{"use strict";t.d(r,{default:()=>x});var a=t(9652),s=t(9528),n=t(4467),l=t(7604),o=t(6409);let i=async()=>{let e=(0,o.q)(),r=await fetch("".concat(e,"/contribute/categories"));if(!r.ok)throw Error("Failed to fetch categories: ".concat(r.status));let t=await r.json();if(!t.success||!t.data)throw Error("Invalid categories response");return t.data},d=()=>(0,l.I)({queryKey:["categories"],queryFn:i,staleTime:6e5,gcTime:18e5,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)});var c=t(4478);let m=async e=>{let r=(0,o.q)(),t=await fetch("".concat(r,"/contribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to submit: ".concat(t.status));return a},u=()=>(0,c.n)({mutationFn:m,retry:2,retryDelay:e=>Math.min(1e3*2**e,5e3)}),p=(0,n.default)(()=>Promise.all([t.e(481),t.e(395),t.e(552),t.e(26)]).then(t.bind(t,6026)),{loadableGenerated:{webpack:()=>[6026]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"rich-text-editor w-full",children:[(0,a.jsxs)("div",{className:"border-primary flex flex-wrap items-center gap-1 divide-x border border-b-0 bg-transparent p-1 text-sm text-black dark:bg-transparent dark:text-white",children:[(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H1",children:"H1"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H2",children:"H2"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Bold",children:"B"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Italic",children:"I"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Underline",children:"U"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pl-3 text-black opacity-50 dark:text-white","aria-label":"Set link",children:"\uD83D\uDD17"})]}),(0,a.jsx)("div",{className:"border-primary rounded-none border bg-transparent px-3 py-2 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert flex min-h-[9rem] items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading editor..."]})})})]})});function x(){var e,r;let[t,n]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[b,h]=(0,s.useState)(0),[g,y]=(0,s.useState)(null),[f,k]=(0,s.useState)(!1),[v,w]=(0,s.useState)({name:!1,email:!1,message:!1}),j=(0,s.useRef)(null),{data:N=[],isLoading:S,error:E}=d(),C=u();function D(e){return/\S+@\S+\.\S+/.test(e)}(0,s.useEffect)(()=>{N.length>0&&null===g&&y(N[0].id)},[N,g]),(0,s.useEffect)(()=>{function e(e){j.current&&!j.current.contains(e.target)&&k(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let P=v.name&&t.trim().length<2?"Please enter at least 2 characters.":"",B=v.email&&!D(l)?"Please enter a valid email address.":"",F=v.message&&m.trim().length<5?"Please enter at least 5 characters.":"";async function L(e){e.preventDefault(),w({name:!0,email:!0,message:!0}),!(t.trim().length<2)&&D(l)&&!(m.trim().length<5)&&g&&C.mutate({name:t,email:l,message:i,category:g},{onSuccess:()=>{n(""),o(""),c(""),x(""),h(e=>e+1),y(N.length>0?N[0].id:null),w({name:!1,email:!1,message:!1})}})}let T=C.isPending,_=C.isSuccess?"success":C.isError?"error":"idle",q=(null==(e=C.error)?void 0:e.message)||null;return E?(0,a.jsx)("div",{className:"border-primary mx-auto w-full border p-6",children:(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:"Failed to load categories. Please refresh the page."})}):(0,a.jsxs)("div",{className:"border-primary mx-auto w-full border p-6",children:["success"===_&&(0,a.jsx)("div",{role:"status","aria-live":"polite",className:"mb-4 rounded-md bg-green-50 p-3 text-sm text-green-700 dark:bg-green-950/30 dark:text-green-300",children:"Thanks! Your message has been sent."}),"error"===_&&(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:q||"There was an error sending your message."}),(0,a.jsxs)("form",{onSubmit:L,noValidate:!0,className:"form grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"name",className:"mb-1 block text-sm font-medium",children:"Name"}),(0,a.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:t,onChange:e=>n(e.target.value),onBlur:()=>w(e=>({...e,name:!0})),"aria-invalid":!!P,"aria-describedby":P?"name-error":void 0,className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(P?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:"Enter your name"}),P&&(0,a.jsx)("p",{id:"name-error",className:"mt-1 text-xs text-red-600",children:P})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium",children:"Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:l,onChange:e=>o(e.target.value),onBlur:()=>w(e=>({...e,email:!0})),"aria-invalid":!!B,"aria-describedby":B?"email-error":"email-help",className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(B?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:"Enter your email"}),B&&(0,a.jsx)("p",{id:"email-error",className:"mt-1 text-xs text-red-600",children:B})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"category",className:"mb-1 block text-sm font-medium",children:"Category"}),(0,a.jsxs)("div",{className:"relative",ref:j,children:[(0,a.jsx)("div",{id:"category",role:"combobox","aria-expanded":f,"aria-haspopup":"listbox",tabIndex:0,onClick:()=>!S&&k(!f),onKeyDown:function(e){"Enter"===e.key||" "===e.key?(e.preventDefault(),k(!f)):"Escape"===e.key?k(!1):("ArrowDown"===e.key||"ArrowUp"===e.key)&&(e.preventDefault(),f||k(!0))},className:"border-primary focus:border-primary w-full rounded-none border bg-transparent px-3 py-2 pr-10 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white ".concat(S?"cursor-not-allowed opacity-50":"cursor-pointer"),children:S?"Loading categories...":(null==(r=N.find(e=>e.id===g))?void 0:r.display_name)||"Select category"}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center",children:(0,a.jsx)("svg",{className:"h-4 w-4 text-black transition-transform dark:text-white ".concat(f?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M6 9l6 6 6-6"})})}),f&&!S&&(0,a.jsx)("div",{role:"listbox",className:"dropdown-menu absolute top-full right-0 left-0 z-10 mt-1 border border-black bg-white shadow-lg dark:border-white dark:bg-black",style:{backgroundColor:"var(--dropdown-bg, white)",color:"var(--dropdown-text, black)"},children:N.map(e=>(0,a.jsx)("div",{role:"option","aria-selected":g===e.id,tabIndex:0,onClick:()=>{y(e.id),k(!1)},onKeyDown:r=>{var t,a;return t=r,a=e.id,void(("Enter"===t.key||" "===t.key)&&(t.preventDefault(),y(a),k(!1)))},className:"dropdown-option cursor-pointer px-3 py-2 text-sm transition-colors",style:{color:"inherit"},children:e.display_name},e.id))})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"message",className:"mb-1 block text-sm font-medium",children:"Message"}),(0,a.jsx)("div",{id:"message",className:"sr-only","aria-hidden":"true",children:"Editor"}),(0,a.jsx)(p,{initialValue:i,resetKey:b,onChange:(e,r)=>{c(e),x(r)},onBlur:()=>w(e=>({...e,message:!0})),invalid:!!F,ariaDescribedBy:F?"message-error":void 0,placeholder:"Please describe your proposal here."}),F&&(0,a.jsx)("p",{id:"message-error",className:"mt-1 text-xs text-red-600",children:F})]}),(0,a.jsx)("div",{className:"pt-2 md:col-span-2",children:(0,a.jsxs)("button",{type:"submit",disabled:T,className:"border-primary inline-flex cursor-pointer items-center justify-center gap-2 rounded-none border px-4 py-2 text-sm font-medium disabled:cursor-not-allowed disabled:opacity-70",children:[T&&(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),T?"Sending...":"Send"]})})]})]})}},4451:(e,r,t)=>{Promise.resolve().then(t.bind(t,2001)),Promise.resolve().then(t.bind(t,9711))},6409:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o,cn:()=>n,q:()=>l});var a=t(848),s=t(1712);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.A)(r))}function l(){return"https://dev-admin-acid.logos.co/api"}function o(e){return null==e?"0":e.toLocaleString()}}},e=>{var r=r=>e(e.s=r);e.O(0,[711,337,108,604,632,82,527,358],()=>r(4451)),_N_E=e.O()}]);