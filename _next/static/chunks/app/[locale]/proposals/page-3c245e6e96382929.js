(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{497:(e,r,t)=>{"use strict";t.d(r,{Z:()=>l,cn:()=>o,q:()=>n});var a=t(8136),s=t(1064);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.A)(r))}function n(){return"https://dev-admin-acid.logos.co/api"}function l(e){return null==e?"0":e.toLocaleString()}},1160:(e,r,t)=>{"use strict";t.d(r,{b:()=>a});let a={home:"/",contributors:"/contributors",resources:"/resources",form:"/form",proposals:"/proposals",issues:"/issues",leaderboard:"/leaderboard"}},7520:(e,r,t)=>{"use strict";t.d(r,{default:()=>h});var a=t(9280),s=t(5916),o=t(9983),n=t(6941),l=t(497);let i=async()=>{let e=(0,l.q)(),r=await fetch("".concat(e,"/contribute/categories"));if(!r.ok)throw Error("Failed to fetch categories: ".concat(r.status));let t=await r.json();if(!t.success||!t.data)throw Error("Invalid categories response");return t.data},d=()=>(0,n.I)({queryKey:["categories"],queryFn:i,staleTime:6e5,gcTime:18e5,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)});var c=t(9611);let m=async e=>{let r=(0,l.q)(),t=await fetch("".concat(r,"/contribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to submit: ".concat(t.status));return a},u=()=>(0,c.n)({mutationFn:m,retry:2,retryDelay:e=>Math.min(1e3*2**e,5e3)});var p=t(8362),x=t(1160);let b=(0,o.default)(()=>Promise.all([t.e(481),t.e(395),t.e(546),t.e(786)]).then(t.bind(t,4786)),{loadableGenerated:{webpack:()=>[4786]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"rich-text-editor w-full",children:[(0,a.jsxs)("div",{className:"border-primary flex flex-wrap items-center gap-1 divide-x border border-b-0 bg-transparent p-1 text-sm text-black dark:bg-transparent dark:text-white",children:[(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H1",children:"H1"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H2",children:"H2"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Bold",children:"B"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Italic",children:"I"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Underline",children:"U"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pl-3 text-black opacity-50 dark:text-white","aria-label":"Set link",children:"\uD83D\uDD17"})]}),(0,a.jsx)("div",{className:"border-primary rounded-none border bg-transparent px-3 py-2 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert flex min-h-[9rem] items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading editor..."]})})})]})});function h(){var e,r;let[t,o]=(0,s.useState)(""),[n,l]=(0,s.useState)(""),[i,c]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[g,y]=(0,s.useState)(0),[f,k]=(0,s.useState)(null),[v,w]=(0,s.useState)(!1),[j,N]=(0,s.useState)({name:!1,email:!1,message:!1}),S=(0,s.useRef)(null),E=(0,p.Ym)(),{data:C=[],isLoading:D,error:P}=d(),B=u();function F(e){return/\S+@\S+\.\S+/.test(e)||49===e.length&&e.startsWith("zQ3sh")&&/^[a-zA-Z0-9]+$/.test(e)}(0,s.useEffect)(()=>{C.length>0&&null===f&&k(C[0].id)},[C,f]),(0,s.useEffect)(()=>{function e(e){S.current&&!S.current.contains(e.target)&&w(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let L=j.name&&t.trim().length<2?"Please enter at least 2 characters.":"",A=j.email&&!F(n)?"Please enter a valid email address or Status App chat key (49 characters starting with zQ3sh).":"",T=j.message&&m.trim().length<5?"Please enter at least 5 characters.":"";async function _(e){e.preventDefault(),window.umami.track("Proposals - Logos Contribute",{source:"".concat(E).concat(x.b.proposals,"/")}),N({name:!0,email:!0,message:!0}),!(t.trim().length<2)&&F(n)&&!(m.trim().length<5)&&f&&B.mutate({name:t,email:n,message:i,category:f},{onSuccess:()=>{o(""),l(""),c(""),h(""),y(e=>e+1),k(C.length>0?C[0].id:null),N({name:!1,email:!1,message:!1})}})}let q=B.isPending,z=B.isSuccess?"success":B.isError?"error":"idle",H=(null==(e=B.error)?void 0:e.message)||null;return P?(0,a.jsx)("div",{className:"border-primary mx-auto w-full border p-6",children:(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:"Failed to load categories. Please refresh the page."})}):(0,a.jsxs)("div",{className:"border-primary mx-auto w-full border p-6",children:["success"===z&&(0,a.jsx)("div",{role:"status","aria-live":"polite",className:"mb-4 rounded-md bg-green-50 p-3 text-sm text-green-700 dark:bg-green-950/30 dark:text-green-300",children:"Thanks! Your message has been sent."}),"error"===z&&(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:H||"There was an error sending your message."}),(0,a.jsxs)("form",{onSubmit:_,noValidate:!0,className:"form grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"name",className:"mb-1 block text-sm font-medium",children:"Name"}),(0,a.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:t,onChange:e=>o(e.target.value),onBlur:()=>N(e=>({...e,name:!0})),"aria-invalid":!!L,"aria-describedby":L?"name-error":void 0,className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(L?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:"Enter your name"}),L&&(0,a.jsx)("p",{id:"name-error",className:"mt-1 text-xs text-red-600",children:L})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium",children:"Email or Status App Chat Key"}),(0,a.jsx)("input",{id:"email",name:"email",type:"text",required:!0,value:n,onChange:e=>l(e.target.value),onBlur:()=>N(e=>({...e,email:!0})),"aria-invalid":!!A,"aria-describedby":A?"email-error":"email-help",className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(A?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:"Enter your email or Status App chat key"}),A&&(0,a.jsx)("p",{id:"email-error",className:"mt-1 text-xs text-red-600",children:A})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"category",className:"mb-1 block text-sm font-medium",children:"Category"}),(0,a.jsxs)("div",{className:"relative",ref:S,children:[(0,a.jsx)("div",{id:"category",role:"combobox","aria-expanded":v,"aria-haspopup":"listbox",tabIndex:0,onClick:()=>!D&&w(!v),onKeyDown:function(e){"Enter"===e.key||" "===e.key?(e.preventDefault(),w(!v)):"Escape"===e.key?w(!1):("ArrowDown"===e.key||"ArrowUp"===e.key)&&(e.preventDefault(),v||w(!0))},className:"border-primary focus:border-primary w-full rounded-none border bg-transparent px-3 py-2 pr-10 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white ".concat(D?"cursor-not-allowed opacity-50":"cursor-pointer"),children:D?"Loading categories...":(null==(r=C.find(e=>e.id===f))?void 0:r.display_name)||"Select category"}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center",children:(0,a.jsx)("svg",{className:"h-4 w-4 text-black transition-transform dark:text-white ".concat(v?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M6 9l6 6 6-6"})})}),v&&!D&&(0,a.jsx)("div",{role:"listbox",className:"dropdown-menu absolute top-full right-0 left-0 z-10 mt-1 border border-black bg-white shadow-lg dark:border-white dark:bg-black",style:{backgroundColor:"var(--dropdown-bg, white)",color:"var(--dropdown-text, black)"},children:C.map(e=>(0,a.jsx)("div",{role:"option","aria-selected":f===e.id,tabIndex:0,onClick:()=>{k(e.id),w(!1)},onKeyDown:r=>{var t,a;return t=r,a=e.id,void(("Enter"===t.key||" "===t.key)&&(t.preventDefault(),k(a),w(!1)))},className:"dropdown-option cursor-pointer px-3 py-2 text-sm transition-colors",style:{color:"inherit"},children:e.display_name},e.id))})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"message",className:"mb-1 block text-sm font-medium",children:"Message"}),(0,a.jsx)("div",{id:"message",className:"sr-only","aria-hidden":"true",children:"Editor"}),(0,a.jsx)(b,{initialValue:i,resetKey:g,onChange:(e,r)=>{c(e),h(r)},onBlur:()=>N(e=>({...e,message:!0})),invalid:!!T,ariaDescribedBy:T?"message-error":void 0,placeholder:"Please describe your proposal here."}),T&&(0,a.jsx)("p",{id:"message-error",className:"mt-1 text-xs text-red-600",children:T})]}),(0,a.jsx)("div",{className:"pt-2 md:col-span-2",children:(0,a.jsxs)("button",{type:"submit",disabled:q,className:"border-primary inline-flex cursor-pointer items-center justify-center gap-2 rounded-none border px-4 py-2 text-sm font-medium disabled:cursor-not-allowed disabled:opacity-70",children:[q&&(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),q?"Sending...":"Send"]})})]})]})}},8957:(e,r,t)=>{Promise.resolve().then(t.bind(t,7520)),Promise.resolve().then(t.bind(t,5129))}},e=>{var r=r=>e(e.s=r);e.O(0,[362,809,510,460,941,509,969,603,358],()=>r(8957)),_N_E=e.O()}]);