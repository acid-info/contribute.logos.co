"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{497:(e,r,t)=>{t.d(r,{Z:()=>n,cn:()=>l,q:()=>o});var a=t(8136),s=t(1064);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.A)(r))}function o(){return"http://localhost:3001/api"}function n(e){return null==e?"0":e.toLocaleString()}},563:(e,r,t)=>{t.d(r,{N_:()=>l,a8:()=>n,rd:()=>i});var a=t(3990),s=t(9193);let{Link:l,redirect:o,usePathname:n,useRouter:i,getPathname:d}=(0,a.A)(s.D)},1160:(e,r,t)=>{t.d(r,{b:()=>a});let a={home:"/",contributors:"/contributors",resources:"/resources",form:"/form",proposals:"/proposals",issues:"/issues",leaderboard:"/leaderboard"}},5153:(e,r,t)=>{t.d(r,{default:()=>f});var a=t(9280),s=t(8877),l=t(563),o=t(5916),n=t(9983),i=t(6941),d=t(497);let c=async()=>{let e=(0,d.q)(),r=await fetch("".concat(e,"/contribute/categories"));if(!r.ok)throw Error("Failed to fetch categories: ".concat(r.status));let t=await r.json();if(!t.success||!t.data)throw Error("Invalid categories response");return t.data},m=()=>(0,i.I)({queryKey:["categories"],queryFn:c,staleTime:6e5,gcTime:18e5,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)});var u=t(9611);let p=async e=>{let r=(0,d.q)(),t=await fetch("".concat(r,"/contribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to submit: ".concat(t.status));return a},x=()=>(0,u.n)({mutationFn:p,retry:2,retryDelay:e=>Math.min(1e3*2**e,5e3)});var b=t(8362),h=t(1160);let g=(0,n.default)(()=>Promise.all([t.e(481),t.e(395),t.e(546),t.e(786)]).then(t.bind(t,4786)),{loadableGenerated:{webpack:()=>[4786]},ssr:!1,loading:()=>(0,a.jsxs)("div",{className:"rich-text-editor w-full",children:[(0,a.jsxs)("div",{className:"border-primary flex flex-wrap items-center gap-1 divide-x border border-b-0 bg-transparent p-1 text-sm text-black dark:bg-transparent dark:text-white",children:[(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H1",children:"H1"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Toggle H2",children:"H2"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Bold",children:"B"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Italic",children:"I"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pr-3 pl-3 text-black opacity-50 dark:text-white","aria-label":"Underline",children:"U"}),(0,a.jsx)("button",{type:"button",disabled:!0,className:"cursor-not-allowed px-2 py-1 pl-3 text-black opacity-50 dark:text-white","aria-label":"Set link",children:"\uD83D\uDD17"})]}),(0,a.jsx)("div",{className:"border-primary rounded-none border bg-transparent px-3 py-2 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert flex min-h-[9rem] items-center justify-center text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Loading editor..."]})})})]})});function y(){var e,r;let[t,s]=(0,o.useState)(""),[l,n]=(0,o.useState)(""),[i,d]=(0,o.useState)(""),[c,u]=(0,o.useState)(""),[p,y]=(0,o.useState)(0),[f,k]=(0,o.useState)(null),[v,w]=(0,o.useState)(!1),[j,N]=(0,o.useState)({name:!1,email:!1,message:!1}),S=(0,o.useRef)(null),C=(0,b.Ym)(),{data:D=[],isLoading:E,error:P}=m(),A=x();function L(e){return/\S+@\S+\.\S+/.test(e)||49===e.length&&e.startsWith("zQ3sh")&&/^[a-zA-Z0-9]+$/.test(e)}(0,o.useEffect)(()=>{D.length>0&&null===f&&k(D[0].id)},[D,f]),(0,o.useEffect)(()=>{function e(e){S.current&&!S.current.contains(e.target)&&w(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let B=j.name&&t.trim().length<2?"Please enter at least 2 characters.":"",F=j.email&&!L(l)?"Please enter a valid email address or Status App chat key (49 characters starting with zQ3sh).":"",T=j.message&&c.trim().length<5?"Please enter at least 5 characters.":"";async function _(e){e.preventDefault(),window.umami.track("Proposals - Logos Contribute",{source:"".concat(C).concat(h.b.proposals,"/")}),N({name:!0,email:!0,message:!0}),!(t.trim().length<2)&&L(l)&&!(c.trim().length<5)&&f&&A.mutate({name:t,email:l,message:i,category:f},{onSuccess:()=>{s(""),n(""),d(""),u(""),y(e=>e+1),k(D.length>0?D[0].id:null),N({name:!1,email:!1,message:!1})}})}let q=A.isPending,z=A.isSuccess?"success":A.isError?"error":"idle",H=(null==(e=A.error)?void 0:e.message)||null;return P?(0,a.jsx)("div",{className:"border-primary mx-auto w-full border p-6",children:(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:"Failed to load categories. Please refresh the page."})}):(0,a.jsxs)("div",{className:"border-primary mx-auto w-full border p-6",children:["success"===z&&(0,a.jsx)("div",{role:"status","aria-live":"polite",className:"mb-4 rounded-md bg-green-50 p-3 text-sm text-green-700 dark:bg-green-950/30 dark:text-green-300",children:"Thanks! Your message has been sent."}),"error"===z&&(0,a.jsx)("div",{role:"alert",className:"mb-4 rounded-md bg-red-50 p-3 text-sm text-red-700 dark:bg-red-950/30 dark:text-red-300",children:H||"There was an error sending your message."}),(0,a.jsxs)("form",{onSubmit:_,noValidate:!0,className:"form grid grid-cols-1 gap-4 sm:gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"name",className:"mb-1 block text-sm font-medium",children:"Name"}),(0,a.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:t,onChange:e=>s(e.target.value),onBlur:()=>N(e=>({...e,name:!0})),"aria-invalid":!!B,"aria-describedby":B?"name-error":void 0,className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(B?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:"Enter your name"}),B&&(0,a.jsx)("p",{id:"name-error",className:"mt-1 text-xs text-red-600",children:B})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium",children:"Email or Status App Chat Key"}),(0,a.jsx)("input",{id:"email",name:"email",type:"text",required:!0,value:l,onChange:e=>n(e.target.value),onBlur:()=>N(e=>({...e,email:!0})),"aria-invalid":!!F,"aria-describedby":F?"email-error":"email-help",className:"w-full rounded-none border bg-transparent px-3 py-2 text-sm ring-0 transition-colors outline-none dark:bg-transparent ".concat(F?"border-red-500 focus:border-red-600":"border-primary focus:border-primary"),placeholder:"Email or Status App chat key"}),F&&(0,a.jsx)("p",{id:"email-error",className:"mt-1 text-xs text-red-600",children:F})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"category",className:"mb-1 block text-sm font-medium",children:"Category"}),(0,a.jsxs)("div",{className:"relative",ref:S,children:[(0,a.jsx)("div",{id:"category",role:"combobox","aria-expanded":v,"aria-haspopup":"listbox",tabIndex:0,onClick:()=>!E&&w(!v),onKeyDown:function(e){"Enter"===e.key||" "===e.key?(e.preventDefault(),w(!v)):"Escape"===e.key?w(!1):("ArrowDown"===e.key||"ArrowUp"===e.key)&&(e.preventDefault(),v||w(!0))},className:"border-primary focus:border-primary w-full rounded-none border bg-transparent px-3 py-2 pr-10 text-sm text-black ring-0 transition-colors outline-none dark:bg-transparent dark:text-white ".concat(E?"cursor-not-allowed opacity-50":"cursor-pointer"),children:E?"Loading categories...":(null==(r=D.find(e=>e.id===f))?void 0:r.display_name)||"Select category"}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center",children:(0,a.jsx)("svg",{className:"h-4 w-4 text-black transition-transform dark:text-white ".concat(v?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M6 9l6 6 6-6"})})}),v&&!E&&(0,a.jsx)("div",{role:"listbox",className:"dropdown-menu absolute top-full right-0 left-0 z-10 mt-1 border border-black bg-white shadow-lg dark:border-white dark:bg-black",style:{backgroundColor:"var(--dropdown-bg, white)",color:"var(--dropdown-text, black)"},children:D.map(e=>(0,a.jsx)("div",{role:"option","aria-selected":f===e.id,tabIndex:0,onClick:()=>{k(e.id),w(!1)},onKeyDown:r=>{var t,a;return t=r,a=e.id,void(("Enter"===t.key||" "===t.key)&&(t.preventDefault(),k(a),w(!1)))},className:"dropdown-option cursor-pointer px-3 py-2 text-sm transition-colors",style:{color:"inherit"},children:e.display_name},e.id))})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"message",className:"mb-1 block text-sm font-medium",children:"Message"}),(0,a.jsx)("div",{id:"message",className:"sr-only","aria-hidden":"true",children:"Editor"}),(0,a.jsx)(g,{initialValue:i,resetKey:p,onChange:(e,r)=>{d(e),u(r)},onBlur:()=>N(e=>({...e,message:!0})),invalid:!!T,ariaDescribedBy:T?"message-error":void 0,placeholder:"Please describe your proposal here."}),T&&(0,a.jsx)("p",{id:"message-error",className:"mt-1 text-xs text-red-600",children:T})]}),(0,a.jsx)("div",{className:"pt-2 md:col-span-2",children:(0,a.jsxs)("button",{type:"submit",disabled:q,className:"border-primary inline-flex cursor-pointer items-center justify-center gap-2 rounded-none border px-4 py-2 text-sm font-medium disabled:cursor-not-allowed disabled:opacity-70",children:[q&&(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),q?"Sending...":"Send"]})})]})]})}function f(e){let{description:r,showHowToContributeLink:t=!0}=e,o=(0,s.c3)("proposals");return(0,a.jsxs)("div",{className:"mx-auto flex w-full max-w-2xl flex-col items-center",children:[r&&(0,a.jsx)("div",{className:"mb-8 flex flex-col items-center gap-2",children:r&&(0,a.jsx)("p",{className:"mb-8 text-base",children:r})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(y,{}),t&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(l.N_,{href:"/resources/how-to-contribute",className:"underline",children:o("howToContribute")})})]})]})}},9193:(e,r,t)=>{t.d(r,{D:()=>a});let a=(0,t(3987).A)({locales:["en","fr","ko"],defaultLocale:"en",localePrefix:"always",localeDetection:!1})}}]);